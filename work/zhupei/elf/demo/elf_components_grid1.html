<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Grig UI DEMO</title>
	<!--加载组件样式-->
	<link type="text/css" href="../css/elf_framework.css" rel="stylesheet"/>
	<link type="text/css" href="../plugins/css/elf_base.css" rel="stylesheet"/>
	<link type="text/css" href="../plugins/css/elf_components_confirm.css" rel="stylesheet"/>
	<link type="text/css" href="../plugins/css/elf_components_toast.css" rel="stylesheet"/>
	<link type="text/css" href="../plugins/css/elf_components_loading.css" rel="stylesheet"/>
	<link type="text/css" href="../plugins/css/elf_components_paging.css" rel="stylesheet"/>
	<link type="text/css" href="../plugins/css/elf_components_grid.css" rel="stylesheet"/>
	<!--加载ELF库文件-->
	<script type="text/javascript" src="../src/v2/elf.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_utils.js"></script>
	<script type="text/javascript" src="../src/v2/elf_terminalInfo.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_algorithm.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_constants.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_cssText.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_control.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_effects.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_xEvents.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_localStorage.js" charset="UTF-8"></script>
	<script type="text/javascript" src="../src/v2/elf_webSocket.js" charset="UTF-8"></script>

	<!--加载组件-->
	<script type="text/javascript" src="../plugins/elf_components_confirm.js"></script>
	<script type="text/javascript" src="../plugins/elf_components_loading.js"></script>
	<script type="text/javascript" src="../plugins/elf_components_toast.js"></script>
	<script type="text/javascript" src="../plugins/elf_components_paging.js"></script>
	<script type="text/javascript" src="../plugins/elf_components_grid.js"></script>
	<!--加载布局组件-->
	<script type="text/javascript" src="../plugins/elf_layout_fixed.js"></script>
	<script type="text/javascript" src="js/fn.js"></script>
	<style type="text/css">
		#toolbar{position: fixed;top: 0px;left: 0;z-index: 999999;}
		.hourWaper div{
			background-color: #f2f2f3;
			height: 64px;
		}
		.elf-grid-body td{padding: 0}
		.hourWaper div.selected{
			background-color: red;
		}
	</style>
	<script type="text/javascript">
        var page={};
        var data=[
            {name:"科室1",time:"1484175600000",size:"30",data:[{start:"1484176200000",end:"1484209182000"}]},
            //{name:"科室2",time:"1484175600000",size:"40",data:[{start:"1484209152000",end:"1484209182000"},{start:"1484212800000",end:"1484217000000"}]},
            {name:"科室2",time:"1484175600000",size:"40",data:[{start:"1484176740000",end:"1484209212000"},{start:"1484212800000",end:"1484217000000"}]},
            {name:"科室3",time:"1484175600000",size:"100",data:[{start:"1484204400000",end:"1484205660000"}]}
        ];
        var map={};
        var cols = [
            {title:'科室', name:'name', width: 100, align: 'center'},
            {title:'容量', name:'size' ,width:100, align:'center'},
            {title:'日期', name:'size' ,width:100, align:'center'},
            {title:'6:00', name:'',width:100,colspan:14, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=0;i<6;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'7:00', name:'',width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=0;i<6;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'8:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=6;i<12;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'9:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=12;i<18;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'10:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=18;i<24;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'11:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=24;i<30;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'12:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=30;i<36;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'13:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=36;i<42;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'14:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=42;i<48;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'15:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=48;i<54;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                    //map[rowIndex].times.push(part);
                }
                return waper;
            }},
            {title:'16:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=54;i<60;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                }
                return waper;
            }},
            {title:'17:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                for(var i=60;i<66;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                }
                return waper;
            }},
            {title:'18:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                console.info(rowData);
                for(var i=66;i<72;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                }
                return waper;
            }},
            {title:'19:00', name:'' ,width:100, align:'center',renderer: function(name,rowIndex,rowData){
                var waper=Elf.controls.createElement("div","hourWaper flex-box flex-nowrap");
                console.info(rowData);
                for(var i=72;i<78;i++){
                    var part=Elf.controls.createElement("div","flex-auto",waper);
                    map[rowIndex].times[i]=part;
                }
                return waper;
            }}
        ];
        function onload(){
            //console.log(new Date().getTime());
            Elf.utils.each(data,function(index, el) {
                var ks={};
                ks.name=el.name;
                ks.size=el.size;
                ks.times=[];
                map[index]=ks;
            });
            page.grid1=Elf.components.grid({
                cols:cols,
                data:data,
                onCellSelected:function(evt,item,rowIndex,colIndex){},
                target:document.body
            });
            Elf.utils.each(data,function(index, el) {
                var day7=el.time;
                if(el.data.length>0){
                    Elf.utils.each(el.data,function(_i,_d) {
                        var start=Math.floor((_d.start-day7)/600000);
                        var end=Math.floor((_d.end-day7)/600000);
                        for(k=start;k<=end;k++){
                            Elf.utils.addClass(map[index].times[k],"selected");
                        }
                    });
                }
            });
            //console.log(new Date().getTime());

        }
	</script>
</head>
<body onload="onload();">
	<!--<div>
		<table>
			<thead></thead>
		</table>
	</div>-->
</body>
</html>