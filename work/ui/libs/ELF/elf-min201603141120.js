(function(){if(!window.applicationCache){alert("E001-检测到您的环境不支持HTML5，程序终止运行！");return}var global=this;if(typeof Elf==="undefined"){global.Elf={}}Elf.global=global})();(function(){Elf.getEvent=function(evt){return evt?evt:window.event};Elf.getEventSource=function(evt){var event=Elf.getEvent(evt);return event.srcElement?event.srcElement:event.target};Elf.stopPop=function(evt){if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=true}}})();Elf.createChild=function(targetObj,childArgs){var child=Elf.controls(childArgs);targetObj.appendChild(child);return child};Elf.doLayout=function(){var sl=document.body.scrollLeft};Elf.terminalInfo=function(){};(function(){var u=navigator.userAgent;Elf.terminalInfo.IsIE=u.indexOf("Trident")>-1;Elf.terminalInfo.IsOpera=u.indexOf("Presto")>-1;Elf.terminalInfo.IsWebKit=u.indexOf("AppleWebKit")>-1;Elf.terminalInfo.IsFireFox=u.indexOf("Gecko")>-1&&u.indexOf("KHTML")==-1;Elf.terminalInfo.IsMobile=!!u.match(/AppleWebKit.*Mobile.*/);Elf.terminalInfo.IsIOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);Elf.terminalInfo.IsAndroid=u.indexOf("Android")>-1||u.indexOf("Linux")>-1;Elf.terminalInfo.IsIPhone=u.indexOf("iPhone")>-1;Elf.terminalInfo.IsIPad=u.indexOf("iPad")>-1;Elf.terminalInfo.IsMobile=Elf.terminalInfo.IsIOS||Elf.terminalInfo.IsIPhone||Elf.terminalInfo.IsIPad||Elf.terminalInfo.IsAndroid||Elf.terminalInfo.IsMobile})();Elf.terminalInfo.testBrowserSupported=function(){if(Elf.terminalInfo.IsMobile){return true}var Browser={};var ua=navigator.userAgent.toLowerCase();var s;(s=ua.match(/trident\/([\d]+)/))?Browser.trident=s[1]:(s=ua.match(/firefox\/([\d]+)/))?Browser.firefox=s[1]:(s=ua.match(/chrome\/([\d]+)/))?Browser.chrome=s[1]:(s=ua.match(/safari\/([\d]+)/))?Browser.safari=s[1]:0;var result=false;if(Browser.trident>=7||Browser.firefox>=36||Browser.chrome>=36||Browser.safari>=600){result=true}return result};Elf.isBrowserSupported=Elf.terminalInfo.testBrowserSupported();Elf.algorithm=function(){};Elf.algorithm.iterateKeys=function(args){var obj=args["collection"];var handler=args["handler"];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){handler(key)}}};Elf.algorithm.iterateValues=function(args){var obj=args["collection"];var handler=args["handler"];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var value=obj[key];handler(value)}}};Elf.algorithm.contains=function(collection,targetObj){var result=false;Elf.algorithm.iterateValues({collection:collection,handler:function(item){if(item==targetObj){result=true}}});return result};Elf.algorithm.appendEvent=function(args){var evtObj=args["eventObj"];var name=args["eventName"];var evt=args["eventFunction"];var stopPop=args["isStopPop"];var newEventFun=function(evt){var event=Elf.getEvent(evt);Elf.algorithm.iterateValues({collection:newEventFun.AppendedEvents,handler:function(item){item.apply(this,arguments)}});if(newEventFun.StopPop){Elf.StopPop(event)}};if(evtObj==null){newEventFun.AppendedEvents={};newEventFun.AppendedEvents[name]=evt;newEventFun.StopPop=stopPop}else{if(!evtObj.AppendedEvents){newEventFun.AppendedEvents={};newEventFun.AppendedEvents["one"]=evtObj;newEventFun.AppendedEvents[name]=evt;newEventFun.StopPop=stopPop}else{newEventFun.AppendedEvents=evtObj.AppendedEvents;newEventFun.AppendedEvents[name]=evt;newEventFun.StopPop=evtObj.StopPop;if(stopPop){newEventFun.StopPop=true}}}return newEventFun};Elf.algorithm.removeEvent=function(args){var evtObj=args["eventObj"];var name=args["eventName"];if(evtObj&&evtObj.AppendedEvents){delete evtObj.AppendedEvents[name]}};Elf.algorithm.copyProperties=function(targetObj,props){Elf.algorithm.iterateKeys({collection:props,handler:function(key){targetObj[key]=props[key]}})};Elf.algorithm.minGestureDistance=50;Elf.algorithm.isDraggedToRight=function(dragInfo){return dragInfo.draggedX>0&&(dragInfo.draggedX-Math.abs(dragInfo.draggedY))>Elf.algorithm.minGestureDistance};Elf.algorithm.isDraggedToLeft=function(dragInfo){return dragInfo.draggedX<0&&(Math.abs(dragInfo.draggedX)-Math.abs(dragInfo.draggedY))>Elf.algorithm.minGestureDistance};Elf.algorithm.getUrlParam=function(pName){var query=window.location.search;var iLen=pName.length;var iStart=query.indexOf(pName);if(iStart==-1){return""}iStart+=iLen+1;var iEnd=query.indexOf("&",iStart);if(iEnd==-1){return query.substring(iStart)}return query.substring(iStart,iEnd)};Elf.algorithm.getBlobByArrayBuffer=function(buffer,format){var Builder=window.WebKitBlobBuilder||window.MozBlobBuilder;if(Builder){var builder=new Builder;builder.append(buffer);return builder.getBlob(format)}else{return new window.Blob([buffer],{type:format})}};Elf.algorithm.buildClosedDoublyLink=function(arr){for(var i=0;i<arr.length;i++){var previousIndex=i==0?(arr.length-1):(i-1);var nextIndex=i==(arr.length-1)?0:i+1;var previous=arr[previousIndex];var current=arr[i];var next=arr[nextIndex];current.previous=previous;current.next=next;current.index=i}};Elf.algorithm.StripHTML=function(strHtml){return strHtml.replace(/<\/?.+?>/g,"")};Elf.constants=function(){};Elf.constants.E002="E002-无法访问浏览器离线数据库，程序终止运行！";Elf.constants.E003="E003-访问离线数据库失败，请关闭浏览器的无痕/隐身模式！";Elf.constants.E004="E004-数据访问异常！";Elf.constants.E005="E005-无法访问浏览器本地存储，程序终止运行！";Elf.constants.E006="E006-无法初始化web socket，程序终止运行！";Elf.constants.E007="E007-服务链接异常！请检测网络连接！";Elf.constants.E008="E008-服务请求异常：";Elf.constants.E009="E009-获取签名失败！";Elf.constants.E010="E010-文件上传失败！";Elf.constants.E011="E011-网络已断开！";Elf.cssText=function(){};Elf.cssText.duration=function(duration){var css="-webkit-transition-duration:"+duration+"s;";css+="-moz-transition-duration:"+duration+"s;";css+="-ms-transition-duration:"+duration+"s;";css+="-o-transition-duration:"+duration+"s;";css+="transition-duration:"+duration+"s;";return css};Elf.cssText.leftTopPosition=function(left,top){return"position:absolute;left:"+left+";"+"top:"+top+";"};Elf.cssText.absoluteCenter=function(obj){var parent=obj.parentNode;var left=(-1)*(obj.offsetWidth-parent.offsetWidth)/2;var top=(-1)*(obj.offsetHeight-parent.offsetHeight)/2;return"position:absolute;margin: auto;left:"+left+"px;"+"top:"+top+"px;"};Elf.cssText.scale=function(scale){var css="-webkit-transform:scale("+scale+");";css+="-moz-transform:scale("+scale+");";css+="-ms-transform:scale("+scale+");";css+="-o-transform:scale("+scale+");";css+="transform:scale("+scale+");";return css};Elf.cssText.transformWithScale=function(tx,ty,scale){var css="-webkit-transform:scale("+scale+") translate("+tx/scale+"px,"+ty/scale+"px"+"); ";css+="-moz-transform:scale("+scale+") translate("+tx/scale+"px,"+ty/scale+"px"+");";css+="-ms-transform:scale("+scale+") translate("+tx/scale+"px,"+ty/scale+"px"+");";css+="-o-transform:scale("+scale+") translate("+tx/scale+"px,"+ty/scale+"px"+");";css+="transform:scale("+scale+") translate("+tx/scale+"px,"+ty/scale+"px"+");";return css};Elf.cssText.rotate=function(rx,ry){var css="-webkit-transform:rotateX("+rx+"deg) rotateY("+ry+"deg);";css+="-moz-transform:rotateX("+rx+"deg) rotateY("+ry+"deg);";css+="-ms-transform:rotateX("+rx+"deg) rotateY("+ry+"deg);";css+="-o-transform:rotateX("+rx+"deg) rotateY("+ry+"deg);";css+="transform:rotateX("+rx+"deg) rotateY("+ry+"deg);";return css};Elf.controls=function(args){var name=args["name"];var className=args["className"];var initProps=args["initProps"];var obj;switch(name){case"button":obj=document.createElement("input");obj.type="button";break;case"submit":obj=document.createElement("input");obj.type="submit";break;case"text":obj=document.createElement("input");obj.type="text";break;case"search":obj=document.createElement("input");obj.type="search";break;case"color":obj=document.createElement("input");obj.type="color";break;case"file":obj=document.createElement("input");obj.type="file";break;case"checkbox":obj=document.createElement("input");obj.type="checkbox";break;case"radio":obj=document.createElement("input");obj.type="radio";break;case"password":obj=document.createElement("input");obj.type="password";break;case"hDiv":obj=Elf.controls({name:"div",className:"hFlex"});break;case"hFullDiv":obj=Elf.controls({name:"div",className:"hFlex full"});break;case"vDiv":obj=Elf.controls({name:"div",className:"vFlex"});break;case"vFullDiv":obj=Elf.controls({name:"div",className:"vFlex full"});break;case"hForm":obj=Elf.controls({name:"form",className:"hFlex"});break;case"hFullForm":obj=Elf.controls({name:"form",className:"hFlex full"});break;case"vForm":obj=Elf.controls({name:"form",className:"vFlex"});break;case"vFullForm":obj=Elf.controls({name:"form",className:"vFlex full"});break;default:obj=document.createElement(name);break}if(className){obj.className=obj.className?obj.className+" "+className:className}if(initProps){Elf.algorithm.copyProperties(obj,initProps)}return obj};Elf.controls.window=function(container,contentObj){var win=Elf.controls({name:"div",className:"window full"});win.background=Elf.createChild(win,{name:"div",className:"windowBackground full"});var content=Elf.createChild(win,{name:"hFullDiv",className:"parallelCenter perpendicularCenter windowContent"});content.appendChild(contentObj);contentObj.WinHandler=win;container.appendChild(win)};Elf.controls.goldenRatioBox=function(contentObj){var wrapper=Elf.controls({name:"div",className:"goldenRatioBox"});var content=Elf.createChild(wrapper,{name:"div",className:"full"});wrapper.appendChild=content.appendChild;if(contentObj){content.appendChild(contentObj)}return wrapper};Elf.controls.longRatioBox=function(contentObj){var wrapper=Elf.controls({name:"div",className:"longRatioBox"});var content=Elf.createChild(wrapper,{name:"div",className:"full"});wrapper.appendChild=content.appendChild;if(contentObj){content.appendChild(contentObj)}return wrapper};Elf.controls.comboBox=function(name,labelText,labelStyle,comboStyle,optionData,changeFunc){var combo=Elf.controls({name:"div",className:"inlineBlock"});combo.wrapper=Elf.createChild(combo,{name:"hDiv",className:"parallelEnd perpendicularStart"});if(labelText){combo.wrapper.label=Elf.createChild(combo.wrapper,{name:"hDiv",className:"parallelEnd perpendicularCenter "+labelStyle,initProps:{innerHTML:labelText}})}combo.wrapper.select=Elf.createChild(combo.wrapper,{name:"select",className:comboStyle,initProps:{name:name}});Elf.algorithm.iterateValues({collection:optionData,handler:function(item){var option=Elf.createChild(combo.wrapper.select,{name:"option",initProps:{value:item["code"],innerHTML:item["name"]}});option.boundData=item}});combo.getSelectedOption=function(){return combo.wrapper.select.options[combo.wrapper.select.selectedIndex]};combo.getBoundData=function(){var selectedOption=combo.getSelectedOption();if(selectedOption){return selectedOption.boundData}};combo.getCode=function(){var boundData=combo.getBoundData();if(boundData){return boundData["code"]}};combo.getName=function(){var boundData=combo.getBoundData();if(boundData){return boundData["name"]}};combo.setValue=function(c){combo.wrapper.select.value=c};combo.addEventListener("change",function(){var data=combo.getBoundData();if(changeFunc){changeFunc(data)}});return combo};Elf.controls.checkBox=function(boxStyle,labelText,checkFunc){var checkbox=Elf.controls({name:"div",className:"inlineBlock skin_cursorHand skin_clickEffect"});checkbox.labelText=labelText;checkbox.wrapper=Elf.createChild(checkbox,{name:"hDiv",className:"parallelEnd perpendicularStart"});checkbox.isChecked=false;checkbox.wrapper.box=Elf.createChild(checkbox.wrapper,{name:"div",className:"checkbox_box "+boxStyle,initProps:{name:name}});checkbox.setChecked=function(checked){if(checked){checkbox.isChecked=true;Elf.effects.appendClass(checkbox.wrapper.box,"checkbox_checked")}else{checkbox.isChecked=false;Elf.effects.removeClass(checkbox.wrapper.box,"checkbox_checked")}if(checkFunc){checkFunc(checkbox.isChecked)}};checkbox.toggleChecked=function(){checkbox.isChecked=!checkbox.isChecked;checkbox.setChecked(checkbox.isChecked)};checkbox.wrapper.label=Elf.createChild(checkbox.wrapper,{name:"hDiv",className:"parallelStart perpendicularCenter",initProps:{innerHTML:labelText}});Elf.xEvents.onXClick(checkbox,function(){checkbox.toggleChecked()});return checkbox};Elf.effects=function(args){var effectsName=args["effectName"];var effectsArgs=args["effectArgs"];Elf.effects[effectsName](effectsArgs)};Elf.effects.DefaultDuration=0.3;Elf.effects.AnimatingFlags=[];Elf.effects.isAnimating=function(){return Elf.effects.AnimatingFlags.length!=0};Elf.effects.changeStyle=function(args){var targetObj=args["targetObj"];var duration=args["duration"];var css=args["css"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.moveToLeft=function(args){var targetObj=args["targetObj"];var duration=args["duration"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);var left="-100%";var top="0";var css=Elf.cssText.leftTopPosition(left,top);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.moveToCentral=function(args){var targetObj=args["targetObj"];var duration=args["duration"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);var left="0";var top="0";var css=Elf.cssText.leftTopPosition(left,top);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.moveToCentralPosition=function(args){var targetObj=args["targetObj"];var duration=args["duration"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);var left=args["left"];var top="0";var css=Elf.cssText.leftTopPosition(left,top);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.moveToRight=function(args){var targetObj=args["targetObj"];var duration=args["duration"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);var left="100%";var top="0";var css=Elf.cssText.leftTopPosition(left,top);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.moveToUpper=function(args){var targetObj=args["targetObj"];var duration=args["duration"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);var left="0";var top="-100%";var css=Elf.cssText.leftTopPosition(left,top);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.moveToLower=function(args){var targetObj=args["targetObj"];var duration=args["duration"];Elf.effects.AnimatingFlags.push(Elf.effects.AnimatingFlags.length);var left="0";var top="100%";var css=Elf.cssText.leftTopPosition(left,top);css+=Elf.cssText.duration(duration);targetObj.style.cssText+=css};Elf.effects.appendClass=function(obj,aClass){var classArray=aClass.split(" ");var oldClassName=obj.className?obj.className:"";var _length=classArray.length;var classMatch=" "+oldClassName+" ";var result=oldClassName;for(var i=0;i<_length;i++){if(classMatch.indexOf(" "+classArray[i]+" ")<0){result+=" "+classArray[i]}}obj.className=result};Elf.effects.removeClass=function(obj,rClass){var classArray=rClass.split(" ");var _length=classArray.length;var oldClassName=obj.className?obj.className:"";var result=" "+oldClassName+" ";for(var i=0;i<_length;i++){result=result.replace(" "+classArray[i]+" "," ")}obj.className=result};Elf.effects.unSelected=function(obj,selectedClass){if(obj.isSelected){Elf.effects.removeClass(obj,selectedClass);obj.isSelected=false}};Elf.effects.singleSelect=function(obj,list,selectedClass){if(!obj.isSelected){Elf.effects.appendClass(obj,selectedClass);obj.isSelected=true;Elf.algorithm.iterateValues({collection:list,handler:function(item){if(item!=obj){Elf.effects.unSelected(item,selectedClass)}}})}};(function(){document.addEventListener("webkitTransitionEnd",function(){Elf.effects.AnimatingFlags.pop()});document.addEventListener("transitionend",function(){Elf.effects.AnimatingFlags.pop()});document.addEventListener("otransitionend",function(){Elf.effects.AnimatingFlags.pop()})})();Elf.xEvents=function(){};Elf.xEvents.DefaultScalingDistance=5000;Elf.xEvents.DefaultScalingRoll=0.05;Elf.xEvents.DefaultTransformDistance=10;Elf.xEvents.MinTouchSpan=50;Elf.xEvents.MinMoveDistance=5;Elf.xEvents.MaxDoubleTouchSpan=300;Elf.xEvents.MaxSwipeTouchSpan=400;Elf.xEvents.isEventing=false;Elf.xEvents.preventEvent=function(){Elf.xEvents.isEventing=true;setTimeout(function(){Elf.xEvents.isEventing=false},Elf.effects.DefaultDuration*1000*1.1)};Elf.xEvents.getDistance=function(x1,y1,x2,y2){return Math.sqrt(Math.pow((x1-x2),2)+Math.pow((y1-y2),2))};Elf.xEvents.eventDispatcher=function(obj){obj.isDispatcherBinded=true;obj.fireClick=function(){var ev=document.createEvent("Event");ev.initEvent("xClick",true,true);obj.dispatchEvent(ev)};obj.fireDblClick=function(){var ev=document.createEvent("Event");ev.initEvent("xDblClick",true,true);obj.dispatchEvent(ev)};obj.fireDrag=function(distance){var args={draggedX:distance.x,draggedY:distance.y};var ev=document.createEvent("Event");ev.initEvent("xDragging",true,true);ev.args=args;obj.dispatchEvent(ev)};obj.fireDragEnd=function(){var ev=document.createEvent("Event");ev.initEvent("xDragEnd",true,true);obj.dispatchEvent(ev)};obj.fireSwipe=function(distance){var args={draggedX:distance.x,draggedY:distance.y};var ev=document.createEvent("Event");ev.initEvent("xSwipe",true,true);ev.args=args;obj.dispatchEvent(ev)};obj.fireScale=function(rate){var args={scaleRate:rate};var ev=document.createEvent("Event");ev.initEvent("xScale",true,true);ev.args=args;obj.dispatchEvent(ev)};if(Elf.terminalInfo.IsMobile){obj.TouchStarts=[];obj.TouchMoves=[];obj.TouchEnds=[];obj.isTouchMoving=false;obj.isTouchScaling=false;obj.addEventListener("touchstart",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var startInfo={};startInfo.fingersCount=event["touches"].length;startInfo.touches=[];for(var i=0;i<event["touches"].length;i++){var touchInfo={x:event["touches"][i].pageX,y:event["touches"][i].pageY};startInfo.touches.push(touchInfo)}startInfo.time=(new Date()).getTime();startInfo.prev=obj.TouchStarts[obj.TouchStarts.length-1];obj.TouchStarts.push(startInfo)});obj.addEventListener("touchmove",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var moveInfo={};moveInfo.fingersCount=event["touches"].length;moveInfo.moveDistances=[];moveInfo.touches=[];for(var i=0;i<event["touches"].length;i++){var distance={x:event["touches"][i].pageX-obj.TouchStarts[obj.TouchStarts.length-1].touches[i].x,y:event["touches"][i].pageY-obj.TouchStarts[obj.TouchStarts.length-1].touches[i].y};if(Math.pow(distance.x,2)+Math.pow(distance.y,2)>Elf.xEvents.MinMoveDistance){obj.isTouchMoving=true}moveInfo.moveDistances.push(distance);var touchInfo={x:event["touches"][i].pageX,y:event["touches"][i].pageY};moveInfo.touches.push(touchInfo)}moveInfo.time=(new Date()).getTime();moveInfo.prev=obj.TouchMoves[obj.TouchMoves.length-1];obj.TouchMoves.push(moveInfo);if(moveInfo.fingersCount==1){if(!obj.isTouchScaling){obj.fireDrag(moveInfo.moveDistances[0])}}else{if(moveInfo.fingersCount==2){var currentDistance=Elf.xEvents.getDistance(moveInfo.touches[0].x,moveInfo.touches[0].y,moveInfo.touches[1].x,moveInfo.touches[1].y);var oriTouchInfo=obj.TouchStarts[obj.TouchStarts.length-1];var oriDistance=Elf.xEvents.getDistance(oriTouchInfo.touches[0].x,oriTouchInfo.touches[0].y,oriTouchInfo.touches[1].x,oriTouchInfo.touches[1].y);var span=currentDistance-oriDistance;var rate=span/Elf.xEvents.DefaultScalingDistance;obj.fireScale(rate);obj.isTouchScaling=true}else{}}});obj.addEventListener("touchend",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var endInfo={};endInfo.fingersCount=event["changedTouches"].length;endInfo.touches=[];for(var i=0;i<event["changedTouches"].length;i++){var touchInfo={x:event["changedTouches"][i].pageX,y:event["changedTouches"][i].pageY};endInfo.touches.push(touchInfo)}endInfo.time=(new Date()).getTime();endInfo.prev=obj.TouchEnds[obj.TouchEnds.length-1];obj.TouchEnds.push(endInfo);var remainFingersCount=event["touches"].length;if(remainFingersCount==0){if(obj.isTouchMoving){if(endInfo.time-obj.TouchStarts[obj.TouchStarts.length-1].time<Elf.xEvents.MaxSwipeTouchSpan){var distance={x:endInfo.touches[0].x-obj.TouchStarts[obj.TouchStarts.length-1].touches[0].x,y:endInfo.touches[0].y-obj.TouchStarts[obj.TouchStarts.length-1].touches[0].y};obj.fireSwipe(distance)}obj.fireDragEnd()}else{if(endInfo.prev){var timeSpan=endInfo.time-endInfo.prev.time;if(timeSpan<Elf.xEvents.MinTouchSpan){}else{if(timeSpan<Elf.xEvents.MaxDoubleTouchSpan){obj.fireDblClick()}else{obj.fireClick()}}}else{obj.fireClick()}}obj.isTouchMoving=false;obj.isTouchScaling=false}})}else{obj.starts=[];obj.mouseDownMoves=[];obj.ends=[];obj.IsMouseDown=false;obj.isMouseDownMoving=false;obj.addEventListener("mousedown",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var startInfo={};startInfo.x=e.pageX;startInfo.y=e.pageY;startInfo.time=(new Date()).getTime();startInfo.prev=obj.starts[obj.starts.length-1];obj.starts.push(startInfo);obj.IsMouseDown=true});obj.addEventListener("mousemove",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);if(obj.IsMouseDown){var moveInfo={};moveInfo.distance={x:e.pageX-obj.starts[obj.starts.length-1].x,y:e.pageY-obj.starts[obj.starts.length-1].y};moveInfo.time=(new Date()).getTime();moveInfo.prev=obj.mouseDownMoves[obj.mouseDownMoves.length-1];obj.mouseDownMoves.push(moveInfo);if(Math.pow(moveInfo.distance.x,2)+Math.pow(moveInfo.distance.y,2)>Elf.xEvents.MinMoveDistance){obj.isMouseDownMoving=true}obj.fireDrag(moveInfo.distance)}});obj.addEventListener("mouseup",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var endInfo={};endInfo.x=e.pageX;endInfo.y=e.pageY;endInfo.time=(new Date()).getTime();endInfo.prev=obj.ends[obj.ends.length-1];obj.ends.push(endInfo);if(obj.isMouseDownMoving){if(endInfo.time-obj.starts[obj.starts.length-1].time<Elf.xEvents.MaxSwipeTouchSpan){var distance={x:endInfo.x-obj.starts[obj.starts.length-1].x,y:endInfo.y-obj.starts[obj.starts.length-1].y};obj.fireSwipe(distance)}obj.fireDragEnd()}else{if(endInfo.prev){var timeSpan=endInfo.time-endInfo.prev.time;if(timeSpan<Elf.xEvents.MinTouchSpan){}else{if(timeSpan<Elf.xEvents.MaxDoubleTouchSpan){obj.fireDblClick()}else{obj.fireClick()}}}else{obj.fireClick()}}obj.IsMouseDown=false;obj.isMouseDownMoving=false});obj.addEventListener("DOMMouseScroll",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var rate;if(e.detail<0){rate=Elf.xEvents.DefaultScalingRoll}else{rate=Elf.xEvents.DefaultScalingRoll*(-1)}obj.fireScale(rate)});obj.addEventListener("mousewheel",function(event){var e=Elf.getEvent(event);Elf.stopPop(e);var rate;if(e.wheelDelta>0){rate=Elf.xEvents.DefaultScalingRoll}else{rate=Elf.xEvents.DefaultScalingRoll*(-1)}obj.fireScale(rate)})}};Elf.xEvents.bindDispatcher=function(obj){if(!obj.isDispatcherBinded){Elf.xEvents.eventDispatcher(obj)}};Elf.xEvents.onXClick=function(obj,action){obj.addEventListener("xClick",action);Elf.xEvents.bindDispatcher(obj)};Elf.xEvents.onXDblClick=function(obj,action){obj.addEventListener("xDblClick",action);Elf.xEvents.bindDispatcher(obj)};Elf.xEvents.onXDragging=function(obj,action,end){obj.addEventListener("xDragging",action);obj.addEventListener("xDragEnd",end);Elf.xEvents.bindDispatcher(obj)};Elf.xEvents.onXSwipe=function(obj,action){obj.addEventListener("xSwipe",action);Elf.xEvents.bindDispatcher(obj)};Elf.xEvents.onXScaling=function(obj,action){obj.addEventListener("xScale",action);Elf.xEvents.bindDispatcher(obj)};Elf.xEvents.stopPop=function(event){var e=Elf.getEvent(event);Elf.stopPop(e)};Elf.webSocket=function(){};Elf.webSocket.showLoading=function(){Elf.loadingTimer=setTimeout(function(){if(Elf.webCallApp){var args={"Command":"showLoading","Args":""};Elf.webCallApp(JSON.stringify(args))}else{Elf.loadMask=Elf.createChild(document.body,{name:"div",className:"loading"})}},0)};Elf.webSocket.dismissLoading=function(){clearTimeout(Elf.loadingTimer);if(Elf.webCallApp){setTimeout(function(){var args={"Command":"dismissLoading","Args":""};Elf.webCallApp(JSON.stringify(args))},500)}else{if(Elf.loadMask){document.body.removeChild(Elf.loadMask);Elf.loadMask=null}}};Elf.webSocket.sendMessage=function(wsUrl,args,callback){if(!window.WebSocket){alert(Elf.constants.E006);return}var ws=new WebSocket(wsUrl);ws.onopen=function(){Elf.webSocket.showLoading();ws.send(JSON.stringify(args))};ws.onclose=function(){Elf.webSocket.dismissLoading()};ws.onmessage=function(event){Elf.webSocket.dismissLoading();ws.close();callback(JSON.parse(event.data))};ws.onerror=function(event){Elf.webSocket.dismissLoading();ws.close();console.error(event);alert(Elf.constants.E007)}};